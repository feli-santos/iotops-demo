{
    "modulesContent": {
        "$edgeAgent": {
            "properties.desired.modules.IoTEdgeMetricsCollector": {
                "env": {
                    "ResourceId": {
                        "value": "/subscriptions/a2c46bc1-e3b2-4553-b99d-56cd56794ed4/resourceGroups/iotops-demo/providers/Microsoft.Devices/IotHubs/iotops-hub"
                    },
                    "UploadTarget": {
                        "value": "AzureMonitor"
                    },
                    "LogAnalyticsWorkspaceId": {
                        "value": "880d4ac1-6cf0-440d-b80a-75c4b82bb9da"
                    },
                    "LogAnalyticsSharedKey": {
                        "value": "fowHyqLV/tmpGFsod7xdRAA/A8d9+ntLV96R5shtqkUQIW2/ZI1lHzFHxz9v6nNeY9NYdXc6qqsNEUTwKS9PTQ=="
                    },
                    "ScrapeFrequencyInSecs": {
                        "value": "600"
                    },
                    "MetricsEndpointsCSV": {
                        "value": "http://edgeAgent:9600/metrics, http://edgeHub:9600/metrics"
                    }
                },
                "restartPolicy": "always",
                "settings": {
                    "image": "mcr.microsoft.com/azureiotedge-metrics-collector:1.1"
                },
                "status": "running",
                "type": "docker"
            }
        },
        "$edgeHub": {
            "properties.desired.routes.FromMetricsCollectorToUpstream": {
                "route": "FROM /messages/modules/IoTEdgeMetricsCollector/* INTO $upstream"
            }
        }
    }
}