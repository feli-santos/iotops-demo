{
    "modulesContent": {
        "$edgeAgent": {
            "properties.desired.modules.IoTEdgeMetricsCollector": {
                "env": {
                    "ResourceId": {
                        "value": "/subscriptions/a2c46bc1-e3b2-4553-b99d-56cd56794ed4/resourceGroups/iotops-demo/providers/Microsoft.Devices/IotHubs/iotops-hub"
                    },
                    "UploadTarget": {
                        "value": "AzureMonitor"
                    },
                    "LogAnalyticsWorkspaceId": {
                        "value": "4ac1085f-be6b-4beb-9406-0ed7fa3359ee"
                    },
                    "LogAnalyticsSharedKey": {
                        "value": "L2VXiZ26eebEhe97bgASoYnMczUKFzG88pGDaX/CrFkxPnFMNKH2857WYX5r7EW+1uque4IeUlPoL5jX6mzqjw=="
                    },
                    "ScrapeFrequencyInSecs": {
                        "value": "60"
                    },
                    "MetricsEndpointsCSV": {
                        "value": "http://edgeAgent:9600/metrics, http://edgeHub:9600/metrics"
                    }
                },
                "restartPolicy": "always",
                "settings": {
                    "image": "mcr.microsoft.com/azureiotedge-metrics-collector:1.1"
                },
                "status": "running",
                "type": "docker"
            }
        },
        "$edgeHub": {
            "properties.desired.routes.FromMetricsCollectorToUpstream": {
                "route": "FROM /messages/modules/IoTEdgeMetricsCollector/* INTO $upstream"
            }
        }
    }
}